<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carvo Dashboard - Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-item {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .success { border-color: #10B981; background: #F0FDF4; }
        .error { border-color: #EF4444; background: #FEF2F2; }
        .warning { border-color: #F59E0B; background: #FFFBEB; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Carvo Dashboard - Component Test</h1>
        
        <div class="test-item" id="data-test">
            <h3>Data Loading Test</h3>
            <p>Checking if mockData is available...</p>
        </div>
        
        <div class="test-item" id="map-test">
            <h3>Map Test</h3>
            <p>Checking if Leaflet is available...</p>
        </div>
        
        <div class="test-item" id="schedule-test">
            <h3>Schedule Test</h3>
            <p>Checking schedule functionality...</p>
        </div>
        
        <div class="test-item" id="orders-test">
            <h3>Orders Test</h3>
            <p>Checking orders functionality...</p>
        </div>
        
        <div class="test-item" id="search-test">
            <h3>Search Test</h3>
            <p>Checking search functionality...</p>
        </div>
    </div>

    <script src="data.js"></script>
    <script>
        // Test data loading
        const dataTest = document.getElementById('data-test');
        if (typeof mockData !== 'undefined') {
            dataTest.className = 'test-item success';
            dataTest.innerHTML = `
                <h3>✅ Data Loading Test</h3>
                <p>Mock data loaded successfully!</p>
                <ul>
                    <li>Vehicles: ${mockData.vehicles.length}</li>
                    <li>Customers: ${mockData.customers.length}</li>
                    <li>Orders: ${mockData.orders.length}</li>
                    <li>Bookings: ${mockData.bookings.length}</li>
                </ul>
            `;
        } else {
            dataTest.className = 'test-item error';
            dataTest.innerHTML = `
                <h3>❌ Data Loading Test</h3>
                <p>Failed to load mock data!</p>
            `;
        }

        // Test Leaflet
        const mapTest = document.getElementById('map-test');
        if (typeof L !== 'undefined') {
            mapTest.className = 'test-item success';
            mapTest.innerHTML = `
                <h3>✅ Map Test</h3>
                <p>Leaflet library loaded successfully!</p>
                <p>Version: ${L.version}</p>
            `;
        } else {
            mapTest.className = 'test-item error';
            mapTest.innerHTML = `
                <h3>❌ Map Test</h3>
                <p>Leaflet library not found!</p>
            `;
        }

        // Test schedule data
        const scheduleTest = document.getElementById('schedule-test');
        if (mockData.bookings && mockData.bookings.length > 0) {
            const today = new Date();
            const todayBookings = mockData.bookings.filter(booking => {
                const bookingDate = new Date(booking.startDate);
                return bookingDate.toDateString() === today.toDateString();
            });
            
            scheduleTest.className = 'test-item success';
            scheduleTest.innerHTML = `
                <h3>✅ Schedule Test</h3>
                <p>Schedule data available!</p>
                <ul>
                    <li>Total bookings: ${mockData.bookings.length}</li>
                    <li>Today's bookings: ${todayBookings.length}</li>
                    <li>Current week bookings: ${mockData.bookings.filter(b => {
                        const bookingDate = new Date(b.startDate);
                        const weekStart = new Date(today);
                        weekStart.setDate(today.getDate() - today.getDay());
                        const weekEnd = new Date(weekStart);
                        weekEnd.setDate(weekStart.getDate() + 6);
                        return bookingDate >= weekStart && bookingDate <= weekEnd;
                    }).length}</li>
                </ul>
            `;
        } else {
            scheduleTest.className = 'test-item error';
            scheduleTest.innerHTML = `
                <h3>❌ Schedule Test</h3>
                <p>No booking data available!</p>
            `;
        }

        // Test orders
        const ordersTest = document.getElementById('orders-test');
        if (mockData.orders && mockData.orders.length > 0) {
            const activeOrders = mockData.orders.filter(o => o.status === 'Active');
            const pendingOrders = mockData.orders.filter(o => o.status === 'Pending');
            const completedOrders = mockData.orders.filter(o => o.status === 'Completed');
            
            ordersTest.className = 'test-item success';
            ordersTest.innerHTML = `
                <h3>✅ Orders Test</h3>
                <p>Orders data available!</p>
                <ul>
                    <li>Total orders: ${mockData.orders.length}</li>
                    <li>Active orders: ${activeOrders.length}</li>
                    <li>Pending orders: ${pendingOrders.length}</li>
                    <li>Completed orders: ${completedOrders.length}</li>
                </ul>
            `;
        } else {
            ordersTest.className = 'test-item error';
            ordersTest.innerHTML = `
                <h3>❌ Orders Test</h3>
                <p>No orders data available!</p>
            `;
        }

        // Test search functionality
        const searchTest = document.getElementById('search-test');
        const searchableItems = [
            ...mockData.vehicles.map(v => ({ type: 'vehicle', name: v.model })),
            ...mockData.customers.map(c => ({ type: 'customer', name: c.name })),
            ...mockData.orders.map(o => ({ type: 'order', name: `Order #${o.id}` }))
        ];
        
        searchTest.className = 'test-item success';
        searchTest.innerHTML = `
            <h3>✅ Search Test</h3>
            <p>Search functionality ready!</p>
            <ul>
                <li>Searchable vehicles: ${mockData.vehicles.length}</li>
                <li>Searchable customers: ${mockData.customers.length}</li>
                <li>Searchable orders: ${mockData.orders.length}</li>
                <li>Total searchable items: ${searchableItems.length}</li>
            </ul>
        `;
    </script>
</body>
</html>

